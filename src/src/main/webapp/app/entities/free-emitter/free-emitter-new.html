<div class="page-header">
    <div class="row">
        <div class="col-md-8">
            <h1>
                {{'global.user.title' | translate}}
                <small>
                    <i class="ace-icon fa fa-angle-double-right"></i>
                    {{'megabillingplatformApp.free_emitter.home.createLabel' | translate}}
                </small>
            </h1>
        </div>
        <div class="col-md-4">
            <a title="Ayuda" data-rel="tooltip" class="btn btn-sm btn-info tooltip-info pull-right" href="">
                <i class="fa fa-lightbulb-o"></i>
            </a>
        </div>
    </div>
</div><!-- /.page-header -->

<div class="row">
    <div class="col-xs-12">
        <ul class="nav nav-pills">
            <li>
                <a href="#/">
                    <i class="ace-icon fa fa-home light-blue bigger-150"></i>
                </a>
            </li>
            <li class="active">
				<a ui-sref="free-emitter.new({login : vm.account.login })">{{'global.user.emitter.data' | translate}}</a>
			</li>
			<li>
				<a ui-sref="free-cfdi.new({login : vm.account.login })">{{'global.user.generate.cfdi' | translate}}</a>
			</li>
            <li>
                <a href="">{{'global.user.search.cfdi' | translate}}</a>
            </li>
            <li>
                <a href="">{{'global.user.join.mega' | translate}}</a>
            </li>
        </ul>
    </div><!-- /.col -->
</div><!-- /.row -->

<div class="hr hr-16 hr-dotted"></div>

<div class="row">
    <div class="col-sm-12">

        <form name="editForm" class="form-horizontal" role="form" novalidate ng-submit="vm.save()" show-validation>
            <div class="row">
                <div class="col-md-6">

                    <h3 class="header smaller lighter blue" translate="megabillingplatformApp.free_emitter.labelDE">
                        Datos del Emisor
                    </h3>
                    <div class="form-group">
                        <label class="col-sm-4 control-label no-padding-right" translate="megabillingplatformApp.free_emitter.rfc" for="rfc">
							RFC
						</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" name="rfc" id="rfc"
							   ng-model="vm.free_emitter.rfc" data-ng-change="vm.onChangeRFC()"
							   required ng-minlength="12" ng-maxlength="13" ng-pattern="/^[A-Z,Ñ,&]{3,4}[0-9]{2}[0-1][0-9][0-3][0-9][A-Z,0-9]?[A-Z,0-9]?[0-9,A-Z]?$/"/>
                            <div ng-show="editForm.rfc.$invalid">
                                <p class="help-block"
                                   ng-show="editForm.rfc.$error.required" translate="entity.validation.required">
                                    This field is required.
                                </p>
                                <p class="help-block"
                                   ng-show="editForm.rfc.$error.minlength" translate="entity.validation.minlength" translate-value-min="12">
                                    This field is required to be at least 12 characters.
                                </p>
                                <p class="help-block"
                                   ng-show="editForm.rfc.$error.maxlength" translate="entity.validation.maxlength" translate-value-max="13">
                                    This field cannot be longer than 13 characters.
                                </p>
                                <p class="help-block"
                                   ng-show="editForm.rfc.$error.pattern" translate="entity.validation.pattern" translate-value-pattern="^[A-Z,Ñ,&amp;]{3,4}[0-9]{2}[0-1][0-9][0-3][0-9][A-Z,0-9]?[A-Z,0-9]?[0-9,A-Z]?$">
                                    This field should follow pattern "^[A-Z,Ñ,&amp;]{3,4}[0-9]{2}[0-1][0-9][0-3][0-9][A-Z,0-9]?[A-Z,0-9]?[0-9,A-Z]?$".
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label no-padding-right" translate="megabillingplatformApp.free_emitter.type_taxpayer" for="field_type_taxpayer">Type taxpayer</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" name="rfc" id="field_type_taxpayer" name="type_taxpayer"
                                   ng-model="vm.free_emitter.type_taxpayer.name" readonly/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label no-padding-right" translate="megabillingplatformApp.free_emitter.tax_regime" for="field_tax_regime">Tax regime</label>
                        <div class="col-sm-8">
                            <select class="form-control" id="field_tax_regime" name="tax_regime" ng-model="vm.free_emitter.tax_regime" ng-options="tax_regime as tax_regime.name for tax_regime in vm.tax_regimes track by tax_regime.id" required>
                                <option value=""></option>
                            </select>
                            <div ng-show="editForm.tax_regime.$invalid">
                                <p class="help-block"
                                   ng-show="editForm.tax_regime.$error.required" translate="entity.validation.required">
                                    This field is required.
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label no-padding-right" translate="megabillingplatformApp.free_emitter.bussines_name" for="field_social_reason">
                            Social reason
                        </label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" name="social_reason" id="field_social_reason"
                                   ng-model="vm.free_emitter.bussines_name"
                                   required ng-minlength="3" ng-maxlength="50" />
                            <div ng-show="editForm.social_reason.$invalid">
                                <p class="help-block"
                                   ng-show="editForm.social_reason.$error.required" translate="entity.validation.required">
                                    This field is required.
                                </p>
                                <p class="help-block"
                                   ng-show="editForm.social_reason.$error.minlength" translate="entity.validation.minlength" translate-value-min="3">
                                    This field is required to be at least 3 characters.
                                </p>
                                <p class="help-block"
                                   ng-show="editForm.social_reason.$error.maxlength" translate="entity.validation.maxlength" translate-value-max="50">
                                    This field cannot be longer than 50 characters.
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label no-padding-right" translate="megabillingplatformApp.free_emitter.email" for="field_email">
							Email
						</label>
                        <div class="col-sm-8">
                            <input type="email" class="form-control" name="email" id="field_email"
							   ng-model="vm.free_emitter.email"
							   required ng-minlength="6" ng-maxlength="254" ng-pattern="/^([a-zA-Z0-9])+([_\.\-]([a-zA-Z0-9])+)*@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9])+$/" />
							<div ng-show="editForm.email.$invalid">
								<p class="help-block"
								   ng-show="editForm.email.$error.required" translate="global.messages.validate.email.required">
                                    Your e-mail is required.
								</p>
								<p class="help-block"
								   ng-show="editForm.email.$error.minlength" translate="global.messages.validate.email.minlength" translate-value-min="6">
                                    Your e-mail is required to be at least 6 characters.
								</p>
								<p class="help-block"
								   ng-show="editForm.email.$error.maxlength" translate="global.messages.validate.email.maxlength" translate-value-max="254">
                                    Your e-mail cannot be longer than 254 characters.
								</p>
								<p class="help-block"
								   ng-show="editForm.email.$error.pattern" translate="global.messages.validate.email.pattern" translate-value-pattern="^([a-zA-Z0-9])+([_\.\-]([a-zA-Z0-9])+)*@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9])+$">
                                    Your e-mail is required.
								</p>
							</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label no-padding-right" translate="megabillingplatformApp.free_emitter.fax" for="field_fax">Fax</label>
                        <div class="col-sm-8">
                        <input type="text" class="form-control" name="fax" id="field_fax"
                               ng-model="vm.free_emitter.fax" ng-pattern="/^[0-9]{1,15}$/"/>
                            <div ng-show="editForm.fax.$invalid">
                                <p class="help-block"
                                   ng-show="editForm.fax.$error.pattern" translate="megabillingplatformApp.free_emitter.messages.validate.fax.pattern" translate-value-pattern="^[0-9]{1,15}$">
                                    Fax format is incorrect.
                                </p>
                            </div>

                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label no-padding-right" translate="megabillingplatformApp.free_emitter.phone1" for="field_phone1">Phone #1</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" name="phone1" id="field_phone1"
                                   ng-model="vm.free_emitter.phone1"
                                   required ng-minlength="1" ng-maxlength="15" ng-pattern="/^[0-9]{1,15}$/" />
                            <div ng-show="editForm.phone1.$invalid">
                                <p class="help-block"
                                   ng-show="editForm.phone1.$error.required" translate="megabillingplatformApp.free_emitter.messages.validate.phone.required">
                                    Your phone is required.
                                </p>
                                <p class="help-block"
                                   ng-show="editForm.phone1.$error.minlength" translate="megabillingplatformApp.free_emitter.messages.validate.phone.minlength" translate-value-min="1">
                                    Your phone is required to be at least 1 digit.
                                </p>
                                <p class="help-block"
                                   ng-show="editForm.phone1.$error.maxlength" translate="megabillingplatformApp.free_emitter.messages.validate.phone.maxlength" translate-value-max="15">
                                    Your phone cannot be longer than 15 digits.
                                </p>
                                <p class="help-block"
                                   ng-show="editForm.phone1.$error.pattern" translate="megabillingplatformApp.free_emitter.messages.validate.phone.pattern" translate-value-pattern="^[0-9]{1,15}$">
                                    Phone format is incorrect.
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label no-padding-right" translate="megabillingplatformApp.free_emitter.phone2" for="field_phone2">Phone #2</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" name="phone2" id="field_phone2"
                                   ng-model="vm.free_emitter.phone2" ng-pattern="/^[0-9]{1,15}$/"/>
                            <div ng-show="editForm.phone2.$invalid">
                                <p class="help-block"
                                   ng-show="editForm.phone2.$error.pattern" translate="megabillingplatformApp.free_emitter.messages.validate.phone.pattern" translate-value-pattern="^[0-9]{1,15}$">
                                    Phone format is incorrect.
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label no-padding-right" translate="megabillingplatformApp.free_emitter.accuracy" for="accuracy">Accuracy</label>
                        <div class="col-sm-8">
                            <select name="accuracy" id="accuracy" ng-model="vm.free_emitter.accuracy" ng-options="val for val in vm.accuracys track by val" required>
                                <option value=""></option>
                            </select>
                            <div ng-show="editForm.accuracy.$invalid">
                                <p class="help-block"
                                   ng-show="editForm.accuracy.$error.required" translate="entity.validation.required">
                                    This field is required.
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="space-6"></div>

                    <h3 class="header smaller lighter blue" translate="megabillingplatformApp.free_emitter.labelDC">
                        Certificado Digital
                    </h3>

                    <div class="form-group" ngf-drop ngf-change="vm.setPath_Certificate($file, vm.free_emitter)">
                        <label class="col-sm-4 control-label no-padding-right" translate="megabillingplatformApp.free_emitter.path_certificate" for="field_path_certificate">Certificate</label>
                        <div class="col-sm-8">
                            <div class="help-block clearfix">
                                <a class="pull-left" ng-click="vm.openFile('', vm.free_emitter.filecertificate)" ng-if="vm.free_emitter.filecertificate" target="_blank">open</a><br>
                                <span class="pull-left">{{vm.certificatename}}</span>
                                <button ng-click="vm.free_emitter.filecertificate=null;vm.free_emitter.filecertificateContentType=null;"
                                        ng-if="vm.free_emitter.filecertificate"
                                        class="btn btn-default btn-xs pull-right">
                                    <span class="glyphicon glyphicon-remove"></span>
                                </button>
                            </div>
                            <button type="file" ngf-select class="btn btn-default btn-block"
                                    ngf-change="vm.setPath_Certificate($file, vm.free_emitter)" translate="megabillingplatformApp.free_emitter.addblobCertificate">
                                Add certificate
                            </button>
                        </div>
                        <input type="hidden" class="form-control" name="path_certificate" id="field_path_certificate"
                               ng-model="vm.free_emitter.filecertificate"
                            />
                        <input type="hidden" class="form-control" name="path_certificate_type" id="field_path_certificate_type"
                               ng-model="vm.free_emitter.filecertificateContentType" />

                        <span ng-show="vm.messcertificate" translate="megabillingplatformApp.free_emitter.messcertificate">.cer file extention is required and file size <= 10 Mb</span>
                    </div>
                    <div class="form-group" ngf-drop ngf-change="vm.setPath_Key($file, vm.free_emitter)">
                        <label class="col-sm-4 control-label no-padding-right" translate="megabillingplatformApp.free_emitter.path_key" for="field_path_key">Path key</label>
                        <div class="col-sm-8">
                            <div class="help-block clearfix">
                                <a class="pull-left" ng-click="vm.openFile('', vm.free_emitter.filekey)" ng-if="vm.free_emitter.filekey" target="_blank">open</a><br>
                                <span class="pull-left">{{vm.keyname}}</span>
                                <button ng-click="vm.free_emitter.filekey=null;vm.free_emitter.filekeyContentType=null;"
                                        ng-if="vm.free_emitter.filekey"
                                        class="btn btn-default btn-xs pull-right">
                                    <span class="glyphicon glyphicon-remove"></span>
                                </button>
                            </div>
                            <button type="file" ngf-select class="btn btn-default btn-block"
                                    ngf-change="vm.setPath_Key($file,vm.free_emitter)" translate="megabillingplatformApp.free_emitter.addblobKey">
                                Add key
                            </button>
                        </div>
                        <input type="hidden" class="form-control" name="path_key" id="field_path_key"
                               ng-model="vm.free_emitter.filekey"
                            />
                        <input type="hidden" class="form-control" name="path_key_type" id="field_path_key_type"
                               ng-model="vm.free_emitter.filekeyContentType" />
                        <span ng-show="vm.messkey" translate="megabillingplatformApp.free_emitter.messkey">.key file extention is required and file size <= 10 Mb</span>
                    </div>

                    <div class="space-6"></div>

                    <h3 class="header smaller lighter blue" translate="megabillingplatformApp.free_emitter.labelLogo">
                        Logo
                    </h3>
                    <div class="form-group" ngf-drop ngf-change="vm.setLogo($file, vm.free_emitter)" ngf-
                         pattern="'image/*'">
                        <label class="col-sm-4 control-label no-padding-right"
                               translate="megabillingplatformApp.free_emitter.path_logo"
                               for="field_logo">Logo</label>
                        <div class="col-sm-8">
                            <img data-ng-src="{{'data:' + vm.free_emitter.filelogoContentType + ';base64,' + vm.free_emitter.filelogo}}" style="max-height: 100px;" ng-if="vm.free_emitter.filelogo"/>
                            <div class="help-block clearfix">
                                <span class="pull-left">{{vm.free_emitter.filelogoContentType}}, {{byteSize(vm.free_emitter.filelogo)}}</span>
                                <button ng-click="vm.free_emitter.filelogo=null;vm.free_emitter.filelogoContentType=null;"
                                        ng-if="vm.free_emitter.filelogo" class="btn btn-default btn-xs pull-right">
                                    <span class="glyphicon glyphicon-remove"></span>
                                </button>
                            </div>
                                <button type="file" ngf-select class="btn btn-default btn-block" ngf-change="vm.setLogo($file, vm.free_emitter)"
                                    accept="image/*" translate="megabillingplatformApp.free_emitter.addblobLogo">
                                Add logo
                                </button>
                            </div>
                            <input type="hidden" class="form-control" name="logo" id="field_logo"
                               ng-model="vm.free_emitter.filelogo"/>
                            <input type="hidden" class="form-control" name="logoContentType"
                               id="field_logoContentType"
                               ng-model="vm.free_emitter.filelogoContentType" />
                        <span ng-show="vm.messlogo" translate="megabillingplatformApp.free_emitter.messlogo">.png or .jpg file extention is required and file size <= 10 Mb</span>

                        </div>
                    </div>
                <div class="col-md-6">
                    <h3 class="header smaller lighter blue" translate="megabillingplatformApp.free_emitter.labelFU">
                        Ubicación Fiscal
                    </h3>
                    <div class="form-group">
                        <label class="col-md-4 control-label no-padding-right" translate="megabillingplatformApp.free_emitter.c_country" for="field_c_country">c_country</label>
                        <div class="col-md-8">
                            <select class="form-control" id="field_c_country" name="c_country" ng-model="vm.free_emitter.c_country" ng-options="c_country as c_country.name for c_country in vm.c_countrys track by c_country.id" data-ng-change="vm.onChangeC_country()" required>
								<option value=""></option>
							</select>
							<div ng-show="editForm.c_country.$invalid">
								<p class="help-block"
								   ng-show="editForm.c_country.$error.required" translate="entity.validation.required">
									This field is required.
								</p>
							</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-4 control-label no-padding-right" translate="megabillingplatformApp.free_emitter.c_state" for="field_c_state">c_state</label>
                        <div class="col-md-8">
                            <select class="form-control" id="field_c_state" name="c_state" ng-model="vm.free_emitter.c_state" ng-options="c_state as c_state.name for c_state in vm.c_states track by c_state.id" data-ng-change="vm.onChangeC_state()">
								<option value=""></option>
							</select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-4 control-label no-padding-right" translate="megabillingplatformApp.free_emitter.c_municipality" for="field_c_municipality">c_municipality</label>
                        <div class="col-md-8">
                            <select class="form-control" id="field_c_municipality" name="c_municipality" ng-model="vm.free_emitter.c_municipality"
                                    ng-options="c_municipality as c_municipality.name for c_municipality in vm.c_municipalitys track by c_municipality.id"
                                    data-ng-change="vm.onChangeC_municipality()">
								<option value=""></option>
							</select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-4 control-label no-padding-right" translate="megabillingplatformApp.free_emitter.c_colony" for="field_c_colony">c_colony</label>
                        <div class="col-md-8">
                            <select class="form-control" id="field_c_colony" name="c_colony" ng-model="vm.free_emitter.c_colony"
                                    ng-options="c_colony as c_colony.code for c_colony in vm.c_colonys track by c_colony.id"
                                    data-ng-change="vm.onChangeC_colony()">
                                <option value=""></option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-4 control-label no-padding-right" translate="megabillingplatformApp.free_emitter.c_zip_code" for="field_c_zip_code">c_zip_code</label>
                        <div class="col-md-8">
                            <input type="text" class="form-control" name="location" id="field_c_zip_code"
                                   ng-model="vm.free_emitter.c_zip_code.code" readonly/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-4 control-label no-padding-right"  translate="megabillingplatformApp.free_emitter.location" for="field_location">Location</label>
                        <div class="col-md-8">
                            <input type="text" class="form-control" name="location" id="field_location"
                                   ng-model="vm.free_emitter.location"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-4 control-label no-padding-right"  translate="megabillingplatformApp.free_emitter.street" for="field_street">Street</label>
                        <div class="col-md-8">
                            <input type="text" class="form-control" name="street" id="field_street"
									ng-model="vm.free_emitter.street"
									required />
							<div ng-show="editForm.street.$invalid">
								<p class="help-block"
									ng-show="editForm.street.$error.required" translate="entity.validation.required">
									This field is required.
								</p>
							</div>
						</div>
                    </div>
					<div class="form-group">
                        <label class="col-md-4 control-label no-padding-right"  translate="megabillingplatformApp.free_emitter.intersection" for="intersection">Intersection</label>
                        <div class="col-md-8">
                            <input type="text" class="form-control" name="intersection" id="intersection"
									ng-model="vm.free_emitter.intersection"
									/>
						</div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-4 control-label no-padding-right" translate="megabillingplatformApp.free_emitter.num_ext" for="field_num_ext">Num ext</label>
                        <div class="col-md-2">
                             <input type="text" class="form-control" name="num_ext" id="field_num_ext" ng-model="vm.free_emitter.num_ext" />
                        </div>
                        <div class="col-md-6">
							<label class="col-md-5 control-label no-padding-right" translate="megabillingplatformApp.free_emitter.num_int" for="field_num_int">Num int</label>
                            <div class="col-md-7">
                                <input type="text" class="form-control" name="num_int" id="field_num_int" ng-model="vm.free_emitter.num_int" />
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label no-padding-right" for="field_reference" translate="megabillingplatformApp.free_emitter.reference" for="field_reference">
                            Reference
                        </label>
                        <div class="col-sm-8">
                            <textarea type="text" id="field_reference" class="form-control" rows="5" ng-model="vm.free_emitter.reference"></textarea>
                        </div>

                    </div>
					<div class="form-group">

						<button type="submit" ng-disabled="editForm.$invalid" class="btn btn-primary pull-right" style="margin: 0 15px">
							<span class="glyphicon glyphicon-save"></span>&nbsp;<span translate="entity.action.save">Save </span>
						</button>

						<button type="button" class="btn btn-default pull-right" onclick="window.history.back()">
							<span class="glyphicon glyphicon-ban-circle"></span>&nbsp;<span translate="entity.action.cancel">Cancel</span>
						</button>

					</div>
                    <jhi-alert-error></jhi-alert-error>
                    <jhi-alert></jhi-alert>
                </div>
            </div>
        </form>

    </div>
</div>
